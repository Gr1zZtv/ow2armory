<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Armory — Log In / Sign Up</title>

  <!-- 1) FirebaseUI CSS (v6) for styling the widget -->
  <link
    type="text/css"
    rel="stylesheet"
    href="https://www.gstatic.com/firebasejs/ui/6.0.0/firebase-ui-auth.css"
  />

  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      font-family: sans-serif;
      background: #0b1625;
      color: #fff;
    }
    h1 {
      margin-bottom: 24px;
    }
    #firebaseui-auth-container {
      width: 320px;
    }
  </style>
</head>
<body>
  <h1>Welcome to The Armory</h1>
  <div id="firebaseui-auth-container"></div>

  <!-- 2) Firebase SDK + FirebaseUI -->
  <script type="module">
    import { auth } from './firebase-config.js';
    import * as firebaseui from 'https://www.gstatic.com/firebasejs/ui/6.0.0/firebase-ui-auth.js';
    import {
      EmailAuthProvider,
      GoogleAuthProvider,
      onAuthStateChanged
    } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js';

    // If already signed in, go home
    onAuthStateChanged(auth, user => {
      if (user) {
        window.location.href = '/index.html';
      }
    });

    // FirebaseUI config: both Email+Password and Google
    const uiConfig = {
      signInSuccessUrl: '/index.html',   // where to go after sign in/up
      signInOptions: [
        EmailAuthProvider.PROVIDER_ID,
        GoogleAuthProvider.PROVIDER_ID
      ],
      // remove any forced "signup" hint—UI will show tabs
    };

    // Initialize and start FirebaseUI
    const ui = new firebaseui.auth.AuthUI(auth);
    ui.start('#firebaseui-auth-container', uiConfig);
  </script>
</body>
</html>